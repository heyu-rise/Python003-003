{% load static %}
{% block head %}
<meta charset="UTF-8">
<title>豆瓣电影短评</title>
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
{% endblock %}
{% block content %}
<nav class="navbar navbar-dark bg-dark">
    <a class="navbar-brand" href="/">首页</a>
    <form class="form-inline">
        <input id="searchBox" class="form-control mr-sm-2" name="q" type="search" placeholder="搜索" value="{{content}}">
        <button class="btn btn-outline-success my-2 my-sm-0" type="button" onclick="search()">搜索</button>
    </form>
</nav>
<div class="container">
    <h3 class="mt-5 mb-3">电影名称：沉默的真相</h3>
    <table class="table">
        <thead class="thead-light">
        <tr>
            <th scope="col">ID</th>
            <th scope="col">短评</th>
            <th scope="col" class="text-nowrap">星级</th>
            <th scope="col">评论时间</th>
        </tr>
        </thead>
        <tbody>
        {% for comment in comments %}
        <tr>
            <th>{{comment.id}}</th>
            <td>{{comment.content}}</td>
            <td>{{comment.star}}</td>
            <td class="text-nowrap">{{comment.comment_date}}</td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
{% block js %}
<script src="{% static 'js/jquery.slim.min.js' %}"></script>
<script src="{% static 'js/bootstrap.min.js' %}"></script>
<script>
    function search(){
        var search = $("#searchBox").val()
        if(search){
            window.open('/douban/index/' + search, '_self')
        } else {
            window.open('/douban/index', '_self')
        }
    }
</script>
{% endblock %}